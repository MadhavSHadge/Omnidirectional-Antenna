def create_widgets(self):
    main_layout = QVBoxLayout()  # Changed to QVBoxLayout for vertical layout
    self.setLayout(main_layout)

    application_settings_group = QGroupBox("APPLICATION SETTINGS")
    application_settings_layout = QVBoxLayout()  # Changed to QVBoxLayout
    spectrum_dump_radio = QRadioButton("Spectrum Dump with Antenna Switching")
    all_antennae_checkbox = QCheckBox("All Antennae in Single Plot")
    normal_spectrum_dump_radio = QRadioButton("Normal Spectrum Dump Only")
    load_setting_button = QPushButton("Load Setting File")
    load_setting_button.setFixedSize(150, 25)
    load_setting_button.clicked.connect(self.load_setting_file)
    save_setting_button = QPushButton("Save Setting File")
    save_setting_button.setFixedSize(150, 25)
    application_settings_layout.addWidget(spectrum_dump_radio)
    application_settings_layout.addWidget(all_antennae_checkbox)
    application_settings_layout.addWidget(normal_spectrum_dump_radio)
    button_layout = QHBoxLayout()
    button_layout.addWidget(load_setting_button)
    button_layout.addWidget(save_setting_button)
    application_settings_layout.addLayout(button_layout)
    application_settings_group.setLayout(application_settings_layout)

    spectrum_analyzer_settings_group = QGroupBox("SPECTRUM ANALYZER SETTINGS")
    spectrum_analyzer_settings_layout = QGridLayout()
    spectrum_analyzer_settings_layout.setHorizontalSpacing(5)
    spectrum_analyzer_settings_layout.setVerticalSpacing(3)
    self.center_spinbox = self.create_spinbox(0, 1000, 750, "Center Frequency (MHz):", spectrum_analyzer_settings_layout, 0, 0, width=80)
    self.span_spinbox = self.create_spinbox(0, 1000, 1500, "Frequency Span (MHz):", spectrum_analyzer_settings_layout, 1, 0, width=80)
    self.rbw_combobox = self.create_combobox(["3", "10", "30", "100", "300", "1000", "3000"], "Resolution Bandwidth (KHz):", spectrum_analyzer_settings_layout, 2, 0, width=80)
    self.vbw_combobox = self.create_combobox(["3", "10", "30", "100", "300", "1000", "3000"], "Video Bandwidth (KHz):", spectrum_analyzer_settings_layout, 3, 0, width=80)
    self.sweep_time_combobox = self.create_combobox(["Auto", "Manual"], "Sweep Time (ms):", spectrum_analyzer_settings_layout, 4, 0, width=80)
    self.reference_level_spinbox = self.create_spinbox(-100, 30, -10, "Reference Level (dBm):", spectrum_analyzer_settings_layout, 5, 0, width=80)
    self.input_attenuation_spinbox = self.create_spinbox(0, 50, 10, "Input Attenuation (dB):", spectrum_analyzer_settings_layout, 6, 0, width=80)
    self.amp_div_spinbox = self.create_spinbox(1, 20, 10, "Amplitude Division (dB):", spectrum_analyzer_settings_layout, 7, 0, width=80)
    self.add_data_dump_duration(spectrum_analyzer_settings_layout)
    spectrum_analyzer_settings_group.setLayout(spectrum_analyzer_settings_layout)

    button_layout = QHBoxLayout()
    self.reset_button = QPushButton("RESET")
    self.reset_button.setFixedSize(150, 30)
    self.start_button = QPushButton("START")
    self.start_button.setFixedSize(150, 30)
    self.reset_button.clicked.connect(self.reset_spectrum_analyzer_settings)
    self.start_button.clicked.connect(self.start_spectrum_analysis)
    button_layout.addWidget(self.reset_button)
    button_layout.addWidget(self.start_button)

    live_spectrum_group = QGroupBox("LIVE SPECTRUM MONITOR")
    live_spectrum_layout = QVBoxLayout()
    self.live_spectrum_widget = LiveSpectrumWidget()
    live_spectrum_layout.addWidget(self.live_spectrum_widget)
    live_spectrum_group.setLayout(live_spectrum_layout)

    main_layout.addWidget(application_settings_group)
    main_layout.addWidget(spectrum_analyzer_settings_group)
    main_layout.addLayout(button_layout)
    main_layout.addWidget(live_spectrum_group)
